#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the License);
# you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

# basic configuration
worker_threads=4
timer_threads=1
cluster_node_id=0

# reactor configuration
cpus=0
reactor_factor=1

# tcp configuration
tcp_ensure_minimum_buffer=false

# frontend configuration
frontend_port=3307

# backend configuration
backend_address=127.0.0.1:3306
backend_username=root
backend_password=123456
backend_connect_timeout=3000

# backend pool configuration
backend_admin_max_pooled_size=2
backend_rw_max_pooled_size=600
backend_ro_max_pooled_size=600

# HA configuration
backend_ha_worker_threads=8
backend_ha_check_interval=5000
backend_ha_check_timeout=3000

# dynamic config file
dynamic_config_file=dynamic.json

# frontend configuration
enable_connection_hold=false
query_retransmit_timeout=20000
query_retransmit_fast_retries=10
query_retransmit_fast_retry_delay=100
query_retransmit_slow_retry_delay=1000

# read-write split configuration
enable_read_write_splitting=true
enable_follower_read=true
enable_leader_in_ro_pools=true
read_weights=
latency_check_timeout=3000
latency_check_interval=1000
latency_record_count=100
slave_read_latency_threshold=3000
fetch_lsn_timeout=1000
fetch_lsn_retry_times=3
enable_stale_read=false

# backend pool refresh configuration
backend_pool_refresh_threads=4
backend_pool_refresh_task_interval=1000
backend_pool_refresh_interval=49000
backend_pool_refresh_sql=/* PolarDB-X-Proxy Refresh */ select 1
backend_pool_refresh_timeout=3000

# privilege configuration
privilege_refresh_timeout=10000
privilege_refresh_interval=10000

# prepared statement configuration
prepared_statement_cache_size=100

# log configuration
log_sql_max_length=4096
log_sql_param_max_length=4096

# global variable refresh configuration
global_variables_refresh_interval=60000

# lease configuration
node_ip=
general_service_port=8083
general_service_timeout=3000
node_lease=10000
update_lease_timeout=3000

# max allowed packet size
max_allowed_packet=1073741824

# smooth switchover configuration
smooth_switchover_enabled=true
smooth_switchover_check_interval=100
smooth_switchover_wait_timeout=10000

# dn password key
dn_password_key=

# log configuration
enable_sql_log=false

# extreme performance configuration
enable_leak_check=false
